---
import PageLayout from "../../layouts/PageLayout.astro";
import { getCollection } from "astro:content";

// Texte laden & nach Datum sortieren (fallback: alphabetisch)
const entries = (await getCollection("texte"))
  .sort((a, b) => {
    const da = a.data.date ?? "1900-01-01";
    const db = b.data.date ?? "1900-01-01";
    return db.localeCompare(da);
  });
---

<!-- HEAD -->
<Fragment slot="head">
  <title>Texte – URSIO</title>
  <meta name="description" content="Alle Texte von URSIO – geordnet, zugänglich, offen für Orientierung." />
</Fragment>

<!-- PAGE -->
<PageLayout title="Texte">
  <section class="texte-index">
    {entries.length === 0 && (
      <p>Noch keine Texte vorhanden.</p>
    )}

    <ul>
      {entries.map((entry) => (
        <li>
          <a href={`/texte/${entry.slug}/`}>
            {entry.data.title ?? entry.slug}
          </a>
        </li>
      ))}
    </ul>
  </section>

  <style>
    .texte-index {
      max-width: 70ch;
      margin: 0 auto;
      padding-block: var(--space-lg);
    }
    ul {
      list-style: none;
      padding-left: 0;
    }
    li {
      margin-block: var(--space-sm);
    }
    a {
      text-decoration: none;
      color: var(--color-ink);
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</PageLayout>